<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>About Us</title>
    <link th:href="@{/css/all.min.css}" rel="stylesheet" />
    <link th:href="@{/css/font.css}" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        /* box-sizing: border-box; */
      }

      body {
        font-family: Arial, sans-serif;
      }

      header {
        width: 100%;
        font-size: 18px;
        position: fixed;
        background: transparent;
        padding: 15px 0;
        z-index: 1000;
      }

      header.scrolled {
        background-color: rgb(249, 249, 249);
        color: black;
        box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.2);
      }

      header.scrolled #name{
        color: #f5a623;
       }

      header.scrolled nav ul li{
        /* font-weight: bold; */
        color: #f5a623;
       }

       

       header.scrolled nav ul li::after{
         bottom: -25px;
       }
        header.scrolled .search-container{
          opacity: 1;
        }

      nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 20px;
      }

      #name {
        font-weight: bold;
        font-size: 25px;
        margin-left: 10px;
        color:#fff;
      }

      nav ul {
        display: flex;
        gap: 20px;
        list-style: none;
      }

      nav ul li {
        position: relative;
        cursor: pointer;
        transition: color 0.3s ease-in-out;
        color: #fff;
      }
      nav ul li:nth-child(4) {
        position: relative;
        cursor: pointer;
        transition: color 0.3s ease-in-out;
        color: #1911fc;
      }

      header.scrolled nav ul li:hover {
        color: #f5a623;
      }

      nav ul li.active
      {
        /* color: #f5a623; */
        /* font-size: 19px; */
        /* font-weight: 900; */
        color: #fccd11;
      }
      nav ul li:hover {
        color: #f5a623;
      }

      nav ul li.active::after {
        content: "";
        position: absolute;
        bottom: -20px;
        left: 0;
        width: 100%;
        padding: 0 3px;
        height: 3px;
        background-color: #f5a623;
      }

      .search-container {
        opacity: 0;
        position: relative;
        display: flex;
        align-items: center;
      }

      #search-input {
        padding: 8px 35px 8px 10px;
        font-size: 14px;
        border: 1px solid #ccc;
        border-radius: 20px;
        width: 250px;
        outline: none;
        transition: box-shadow 0.3s ease-in-out;
      }

      #search-input:focus {
        border-color: #b48a47;
        box-shadow: 0 0 8px rgba(244, 191, 105, 0.6);
      }

      .lens-icon {
        position: absolute;
        right: 10px;
        color: #666;
        font-size: 16px;
        pointer-events: none;
      }

      .extra-icons {
        display: flex;
        gap: 15px;
        align-items: center;
        margin-right: 10px;
      }

      .icon-container {
        font-size: 20px;
        color: #4d4d4d;
        cursor: pointer;
        transition: color 0.3s ease;
      }

      .icon-container:hover {
        color: #f5a623;
        background-color: #ccc;
      }

      .cart{
        border-radius: 8px;
        background-color: #e1e0e0d1;
        width: auto;
        padding: 0 8px;
        height: 40px;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 1px 1px 1px #5954547a;
        
      }
      .cart-count {
        margin-left: 5px;
        font-size: 16px;
      }
      .notification {
        position: relative;
        background-color: #e2e2e2;
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        box-shadow: 1px 1px 1px #5954547a;
      }

      .bell-icon {
        font-size: 20px;
        color: #636262;
      }

      .notification-dot {
        position: absolute;
        top: 5px;
        right: 5px;
        width: 8px;
        height: 8px;
        background-color: red;
        border-radius: 50%;
      }

      .profile-img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #ddd;
        cursor: pointer;
        box-shadow: 1px 1px 1px #5954549c;
        transition: border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
      }

      .profile-img:hover {
        border-color: #f5a623;
        box-shadow: 0 0 5px #f5a623;
      }

      /* #img-container img{
        width: 100%;
        height: auto;
        object-fit: cover;
       } */

      .overlay{
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 600px;
        background-color: #00000036;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }
      .overlay h1{
        font-size: 85px;
        font-weight: 900;
        color: #fff;
      }
      .overlay p{
        font-size: 25px;
        color: #fff;
      }
      .img-container {
        height: 600px;
      }
      .background-img{
        width: 100%;
        height: 100%;
        background-size: 100%;
        object-fit: cover;
        /* filter: blur(10px); */
      }

      #p-container{
        /* height: 300px; */
        background-color: #f4f4f4;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      #p-container div{
        width: 50%;
        margin: 70px 0px;
        font-size: 19px;
      }

      footer {
          background-color: #3a342c;
          color: #fff;
          padding: 40px 0;
      }

      .footer-container {
          display: flex;
          justify-content: space-around;
          flex-wrap: wrap;
          max-width: 1200px;
          margin: 0 auto;
      }

      .footer-section {
          flex: 1;
          min-width: 200px;
          margin: 20px;
      }

      .footer-section h3 {
          font-size: 1.5rem;
          margin-bottom: 20px;
      }

      .footer-section ul {
          list-style: none;
          padding: 0;
      }

      .footer-section ul li {
          margin-bottom: 10px;
      }

      .footer-section ul li a {
          color: #fff;
          text-decoration: none;
          transition: color 0.3s;
      }

      .footer-section ul li a:hover {
          color: #f5a623;
      }

      .footer-bottom {
          text-align: center;
          /* padding: 5px 0; */
          /* border-top: 1px solid #444; */
          margin-top: 20px;
      }

      .footer-bottom p {
          margin: 0;
          font-size: 0.9rem;
          color: #585858;
      }

      .modal-container {
        position: fixed;
        top: 75px;
        right: 10px;
        z-index: 9999;
      }

      .modal {
        display: none; /* Hide by default */
        background-color: #fff;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        padding: 10px;
        border-radius: 5px;
        width: 170px;
        z-index: 10000;
        position: relative;
      }

      .modal.active {
          display: block; /* Show when toggled */
      }

      .modal ul {
        list-style-type: none;
        padding: 0;
      }

      .modal ul li {
        padding: 10px;
        display: flex;
        align-items: center;
        cursor: pointer;
        transition: all 0.3s ease;
        color: #b48a47;
      }

      .modal ul li i {
        margin-right: 10px;
        font-size: 18px;
        color: #e09f38;
      }

      .modal ul li a {
        text-decoration: none;
        color: #b48a47;
      }

      .modal ul li:hover {
        border-radius: 8px;
        background-color: #c0bdb847;
      }

      .triangle {
        position: absolute;
        top: -10px;
        right: 30px;
        border-left: 10px solid transparent;
        border-right: 10px solid transparent;
        border-bottom: 10px solid #fff;
        z-index: 10001;
      }

      .cart-modal {
          display: none;
          justify-content: end;
          align-items: center;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.5);
          z-index:100000;
      }

      .cart-modal-content { 
          margin-right: 20px;
          width: 750px;
          height: 700px;
          background-color: #fff;
          border-radius: 10px;
          display: flex;
          flex-direction: column;
          
      }

      .cart-modal-detail {
          flex: 1;
          display: flex;
          flex-direction: column;
          /* border: 3px solid red; */
      }

      .cart-modal-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          height: 80px;
          font-size: 24px;
          font-weight: bold;
          padding: 0 40px;
          box-sizing: border-box;
          /* border-bottom: 1px solid #606060; */
          box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.121);
      }

      .cart-modal-header h2{
          font-size: 28px;
      }

      .cart-items{
          /* flex: 1; */
          height: 440px;
          display: flex;
          flex-direction: column;
          overflow-y: auto;
          margin: 0 20px;
          margin-top: 10px;
      }

      .cart-payment-detail{
          height: 180px;
          /* border: 3px solid green; */
      }

      .cart-total{
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 0 40px;
          margin: 20px 0;
      }
      .cart-total-total,.cart-total strong{
          font-weight: bold;
          font-size: 25px;
      }

      .cart-close-btn {
          font-size: 30px;
          cursor: pointer;
      }

      .cart-close-btn:hover{
          color: #e38d03;
      }

      .cart-item {
          display: flex;
          align-items: center;
          gap: 10px;
          border-bottom: 1px solid #ddd;
          padding: 10px 0;
      }

      .cart-item img {
          width: 100px;
          height: 100px;
          object-fit: cover;
          border-radius: 5px;
      }

      .cart-item-details {
          padding: 0 20px;
          flex: 1;
          line-height: 35px;
         
      }

      .cart-item-details p {
          font-size: 14px;
          margin: 0;
      }

      .cart-item-quantity {
          width: 100px;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
      }

      .cart-item-qty{
          display: inline-block;
          text-align: center;
          line-height: 15px;
          width: 15px;
          height: 15px;
          padding: 10px;
          border: 1px solid #4d4d4d;
          border-radius: 10px;
          margin-bottom: 10px;
      }

      .remove-btn {
          background: none;
          border: none;
          color: #4d4d4d;
          text-decoration: underline;
          cursor: pointer;
          transition: all 0.3s ease;
      }
      .remove-btn:hover{
          color: #e09f38;
      }

      .cart-buttons {
          display: flex;
          justify-content:space-between;
          margin-top: 15px;
      }

      .view-cart {
          opacity: 0;
          background: purple;
          color: white;
          border: none;
          padding: 10px 20px;
          cursor: pointer;
      }

      .checkout {
          text-align: center;
          width: 40%;
          background: none;
          font-size: 17px;
          font-weight: bold;
          border: 2px solid black;
          padding: 15px 80px;
          cursor: pointer;
          border-radius: 10px;
          margin-top: 10px;
          margin-right: 20px;
          transition: all 0.3s ease;
      }
      .checkout.active{ 
         background-color: #e38d03;
         display: flex;
         justify-content: center;
         align-items: center;
         border: 2px solid #e38d03;
      }
      .checkout:hover {
          background: #e38d03;
          color: white;
          border: 2px solid #e38d03;
      }
      #quick-add:hover {
          cursor: pointer;
      }

      .loading-spinner {
          border: 4px solid transparent;
          border-top: 4px solid #eef0f1;
          border-radius: 50%;
          width: 20px;
          height: 20px;
          animation: spin 1s linear infinite;
      }

      /* Animation for spinning */
      @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
      }

    </style>
  </head>
  <body>
    <header>
      <nav>
        <p id="name">Khine Myanmar</p>
        <ul>
            <li onclick="navigateTo('/customer/index')">Home</li>
            <li onclick="navigateTo('/customer/product')">Products</li>
            <li onclick="navigateTo('/customer/shop')">Shops</li>
            <li class="active" onclick="navigateTo('/customer/aboutUs')">About Us</li>
        </ul>
        <div class="search-container" style="opacity: 0;">
          <input type="text" placeholder="Search..." id="search-input" />
          <i class="fas fa-search lens-icon"></i>
        </div>
        <div class="extra-icons">
          <div class="icon-container cart" id="cart">
            <i class="fas fa-shopping-cart"></i>
            <span class="cart-count"></span>
          </div>
          <div class="notification">
            <i class="fa-solid fa-bell bell-icon"></i>
            <span class="notification-dot"></span>
          </div>
          <img
            class="profile-img"
            th:src="${customer.profilePic}"
            alt="Profile"
          />
        </div>
      </nav>
    </header>

    <section class="img-container">
      <div class="overlay">
        <h1>About Us</h1>
        <p>For customers, very where.</p>
      </div>
      <img class="background-img" th:src="@{/img/11062b_7478ea5332a34fefaff6e19f2c22e7b8~mv2.webp}">
    </section>
    <section class="section" id="p-container">
      <div class="paragraph">
        <p>
          We believe that shopping should be for everyone. It helps us discover new trends, express ourselves, and connect with the world around us.
        </p><br/>
        <p>
          Our goal is to help more people from diverse backgrounds experience the joy of seamless shopping. Because we believe this builds a more connected, more inclusive, and more exciting marketplace.
        </p><br/>
        <p>
          Like you, shopping is in our DNA. At Khine Myanmar, we believe shopping opens the door to the greatest, most fulfilling experiences life can offer. And we have learned that the best shopping is about discovering unique products, about supporting local businesses, about immersing yourself in a world of choice, rather than just buying what’s convenient.
        </p><br/>
        <p>
          As shoppers, you're on a journey, and at Khine Myanmar, we're on one, too. Over the last few years, ecommerce has transformed. We're thinking deeply not just about how people shop but why they shop and how to best serve customers on their journey – and we approach our future with a passion and commitment to helping everyone find what they love.
        </p><br/>        
      </div>
    </section>

    <div id="cart-modal" class="cart-modal">
      <div class="cart-modal-content">
          <div class="cart-modal-detail">
            <div class="cart-modal-header">
              <h2>Cart<span class="cart-count">(<span id="cart-count">2</span>)</span></h2>
              <span class="cart-close-btn">&times;</span>
            </div>
            <div class="cart-items">
                
            </div>
          </div>
          <div class="cart-payment-detail">
            <div class="cart-total">
                <span class="cart-total-total">Total </span>
                <strong></strong>
            </div>
            <div class="cart-buttons">
                <button class="view-cart">View cart</button>
                <button class="checkout" id="checkout-btn">Check Out</button>
            </div>
          </div>
          
      </div>
    </div>
    
    <footer>
        <div class="footer-container">
            <div class="footer-section">
                <h3>Exclusive</h3>
                <ul>
                    <li><a href="#">New Arrivals</a></li>
                    <li><a href="#">Best Sellers</a></li>
                    <li><a href="#">Trending</a></li>
                    <li><a href="#">Special Offers</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Support</h3>
                <ul>
                    <li><a href="#">Customer Service</a></li>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Return Policy</a></li>
                    <li><a href="#">Contact Us</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Account</h3>
                <ul>
                    <li><a href="#">My Account</a></li>
                    <li><a href="#">Order History</a></li>
                    <li><a href="#">Wishlist</a></li>
                    <li><a href="#">Track Order</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Quick Link</h3>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms & Conditions</a></li>
                    <li><a href="#">Blog</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; Rimel 2024. All rights reserved.</p>
        </div>
    </footer>
    <script>
      document.addEventListener("DOMContentLoaded", updateCartCount);
      function updateCartCount() {
            fetch('/customer/cartCount')
                .then(response => response.json())
                .then(data => {
                  // Update the cart count in the header and sidebar
                    console.log('Cart count updated:', data.cartCount);
                    console.log(data);  
                    document.querySelector('.cart-count').innerText = data.cartCount;
                    document.getElementById('cart-count').innerText = data.cartCount;
                })
                .catch(error => console.error('Error fetching cart count:', error));
      }
    </script>
    <div class="modal-container">
      <div id="profile-modal" class="modal">
        <div class="triangle"></div>
        <ul>
          <li onclick="navigateTo('/customer/profile')">
            <i class="fas fa-user"></i> Profile
          </li>
          <li onclick="navigateTo('/customer/history')">
            <i class="fas fa-history"></i> History
          </li>
          <li onclick="navigateTo('/ecom/index')">
            <i class="fas fa-sign-out-alt"></i> Log Out
          </li>
        </ul>
      </div>
    </div>
  </body>
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const profileImg = document.querySelector(".profile-img");
    const profileModal = document.getElementById("profile-modal");

    profileImg.addEventListener("click", () => {
      profileModal.classList.toggle("active");
    });

    // Close the modal if clicked outside
    document.addEventListener("click", (event) => {
      if (!profileImg.contains(event.target) && !profileModal.contains(event.target)) {
        profileModal.classList.remove("active");
      }
    });
  });
</script>
  <script>
    document.querySelectorAll("header nav ul li").forEach((li) => {
        li.addEventListener("click", () => {
            // Remove the 'active' class from all list items
            document.querySelectorAll("header nav ul li").forEach((item) => {
                item.classList.remove("active");
            });
            li.classList.add("active");
        });
    });
  </script>
  <script>
    window.addEventListener("scroll", function() {
      document.querySelector("header").classList.toggle("scrolled", window.scrollY > 50);
    });
    function navigateTo(path) {
        window.location.href = path;
    }
    </script>
    <script>
      
    </script>
    <script>
      const cartIcon = document.getElementById("cart");
      const cartModal = document.getElementById("cart-modal");
      const cartCloseBtn = document.querySelector(".cart-close-btn");
      const cartItemsContainer = document.querySelector(".cart-items");
      const cartCount = document.getElementById("cart-count");
      const cartTotal = document.querySelector(".cart-total strong");

      // Function to fetch cart items from the backend
      async function fetchCartItems() {
          try {
              const response = await fetch("/customer/allcartitems");
              const cart = await response.json();
              console.log(cart);
              renderCart(cart);
          } catch (error) {
              console.error("Error fetching cart items:", error);
          }
      }

      // Function to render cart items dynamically
      function renderCart(cart) {
          cartItemsContainer.innerHTML = ""; // Clear previous items

          let total = 0;
          cart.forEach(item => {
              const itemElement = document.createElement("div");
              console.log(item);
              itemElement.classList.add("cart-item");
              total += item.price * item.quantity;

              itemElement.innerHTML = `
                  <img src="${item.image}" alt="${item.name}">
                  <div class="cart-item-details">
                      <p>${item.name}</p>
                      <span>${item.price.toLocaleString()} Ks</span>
                  </div>
                  <div class="cart-item-quantity">
                      <span class="cart-item-qty">${item.quantity}</span>
                      <button class="remove-btn" data-id="${item.id}">Remove</button>
                  </div>
              `;

              cartItemsContainer.appendChild(itemElement);
          });

          cartCount.textContent = cart.length;
          cartTotal.textContent = `${total.toLocaleString()} Ks`;

          attachRemoveEventListeners();
      }

      // Function to remove an item
      async function removeCartItem(itemId) {
          try {
              await fetch(`/customer/removeFromCart/${itemId}`, { method: "DELETE" });
              fetchCartItems(); 

          } catch (error) {
              console.error("Error removing item:", error);
          }
      }

      // Attach event listeners to remove buttons
      function attachRemoveEventListeners() {
          document.querySelectorAll(".remove-btn").forEach(button => {
              button.addEventListener("click", () => {
                  const itemId = button.getAttribute("data-id");
                  removeCartItem(itemId);
              });
          });
      }

      // Show cart and fetch items when clicked
      cartIcon.addEventListener("click", () => {
          cartModal.style.display = "flex";
          fetchCartItems();
      });

      // Close cart modal
      cartCloseBtn.addEventListener("click", () => {
          cartModal.style.display = "none";
          
      });

      // Close cart modal when clicking outside
      document.addEventListener("click", (event) => {
          if (!cartModal.contains(event.target) && !cartIcon.contains(event.target)) {
              cartModal.style.display = "none";
              
          }
      });
      
      
    </script>
    <script>

      const checkoutBtn = document.querySelector("#checkout-btn");
      checkoutBtn.addEventListener("click", async () => {
      console.log("Checkout clicked");
      checkoutBtn.classList.add("active");
      checkoutBtn.innerHTML = '<div class="loading-spinner"></div>';

      try {
          const response = await fetch('/customer/checkout', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json',
              },
          });
          if (response.ok) {
              const result = await response.text();
              // console.log(result); 
              if(result == 'Order placed successfully'){
                  setTimeout(() => {
                        cartModal.style.display = 'none';
                        Swal.fire({
                              title: "Order Placed Successful",
                              text: result,
                              icon: "success",
                              confirmButtonText: "OK"
                          }).then(() => {
                              location.reload();
                              
                  });
                    }, 1000); 
              }
          } else {
              const error = await response.text();
              console.error("Checkout failed:", error); 
              setTimeout(() => {
                  cartModal.style.display = 'none';
                  Swal.fire({
                        title: "Oops! Something went wrong",
                        text: error,
                        icon: "error",
                        showConfirmButton: true
                    }).then(() => {
                        location.reload();
                    });
            }, 1000); 
            console.error("Checkout failed:", error); 
          }
      } catch (error) {
          console.error("Error during checkout:", error); 
          setTimeout(() => {
                  cartModal.style.display = 'none';
                  Swal.fire({
                        title: "Oops! Something went wrong",
                        text: error,
                        icon: "error",
                        showConfirmButton: true
                    }).then(() => {
                        location.reload();
                    });
            }, 1000); 
      }});
      
    </script>
</html>
